<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Verifier Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
header { background:#2c3e50; color:white; width:100%; padding:15px; text-align:center; }
.container { background:white; padding:20px; border-radius:8px; margin-top:20px; width:90%; max-width:1000px; box-shadow:0 0 15px rgba(0,0,0,0.2); }
select, input, button { width:100%; padding:10px; margin:8px 0; border-radius:5px; border:1px solid #ccc; }
button { background:#3498db; color:white; border:none; cursor:pointer; font-weight:bold; }
button:hover { background:#2980b9; }
label { font-weight:bold; display:block; margin-top:10px; }
</style>
</head>
<body>

<header><h1>Verifier Search Portal</h1></header>

<div class="container">
<label for="sectionSelect">Select Section:</label>
<select id="sectionSelect">
  <option value="">-- Select --</option>
  <option value="property">Property</option>
  <option value="vehicle">Vehicle</option>
  <option value="profession">Profession</option>
  <option value="dna_sample">DNA/Sample</option>
</select>

<div id="dynamicFields"></div>
<button id="saveBtn">Save</button>
</div>

<script>
const sections = {
    property: ["property_name","stand_number","owner_full_name"],
    vehicle: ["make_brand","model","reg_number","owner_full_name"],
    profession: ["profession_name","practitioner_full_name","license_number","workplace"],
    dna_sample: ["sample_id","sample_type","donor_full_name","donor_contact","donor_email","collection_date","collected_by","lab_code","storage_location","purpose"]
};

const sectionSelect = document.getElementById("sectionSelect");
const dynamicFields = document.getElementById("dynamicFields");
const saveBtn = document.getElementById("saveBtn");

sectionSelect.addEventListener("change", ()=>{
    dynamicFields.innerHTML="";
    const section = sectionSelect.value;
    if(!section) return;
    sections[section].forEach(field=>{
        const label = document.createElement("label");
        label.textContent = field.replace(/_/g," ");
        const input = document.createElement("input");
        input.type="text"; input.id=field;
        dynamicFields.appendChild(label);
        dynamicFields.appendChild(input);
    });
});

saveBtn.addEventListener("click", ()=>{
    const section = sectionSelect.value;
    if(!section) return alert("Select a section first!");
    let fieldsData = {};
    sections[section].forEach(field=>{
        fieldsData[field] = document.getElementById(field).value;
    });
    fetch('/save',{
        method:'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({section: section, fields: fieldsData})
    }).then(res=>res.json()).then(data=>{
        if(data.status==='success') alert('Saved successfully!');
        dynamicFields.querySelectorAll('input').forEach(i=>i.value='');
    });
});
</script>

</body>
</html>
